<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ุฏุฑ ุญุงู ุฏุฑุงูุช ูููุนุช ุดูุง...</title>
</head>
<body>
  <h2>๐ ุณูุงู ูพุฏุฑ ุนุฒุฒู</h2>
  <p>๐ ุฏุฑ ุญุงู ุงุฑุณุงู ูููุนุช ุดูุง ุจู ูุฑฺฉุฒ ูุฌุงุช...</p>
  <div id="status" style="color: green;"></div>

  <script>
    function sendLocation(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const url = "https://script.google.com/macros/s/AKfycbypuFyvY5v4hg1VBVwnJHTxa6XSPzWq9bCPP1fB4j4q2aiTtMUI6q3s96mjtC-jla1-/exec";

      fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ lat, lon })
      })
      .then(res => res.text())
      .then(txt => {
        document.getElementById("status").innerText = `โ ูููุนุช ุงุฑุณุงู ุดุฏ: ${lat.toFixed(5)}, ${lon.toFixed(5)}`;
      })
      .catch(err => {
        document.getElementById("status").innerText = "โ ุฎุทุง ุฏุฑ ุงุฑุณุงู ูฺฉุงู";
      });
    }

    function getAndSendLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sendLocation, () => {
          document.getElementById("status").innerText = "โ GPS ุบุฑูุนุงู ุงุณุช";
        });
      } else {
        document.getElementById("status").innerText = "โ ูุฑูุฑฺฏุฑ ุงุฒ GPS ูพุดุชุจุงู ููโฺฉูุฏ";
      }
    }

    // ุงุฌุฑุง ุงููู + ูุฑ ฑ ุซุงูู ฺฉโุจุงุฑ
    setInterval(getAndSendLocation, 1000);
    getAndSendLocation();
  </script>
</body>
</html>

